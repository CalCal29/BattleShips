<!DOCTYPE html>
<html>
    <head>
        <style>
            canvas {
                border: solid black 1px;
            }
        </style>
        <script>
            var color = ['red','white','blue'];
            
            var clouds_dx;
            var clouds_dy;
            var color2;
            var color3;
            var houses = [];
            var externals = [];
            var clouds = [];
            var cloud1;
            var road1
            var i = 0
            var constant = 0
            var canvas, context;
            var car_dx, car_dy;
            var car1
            var car2
            var carsupper = [];
            var carslower = [];
            var upcloud = [];
            
            //for road


            function drawline(x,y)
            {
                context.beginPath()
                context.moveTo(x + 25, y + 40)
                context.lineTo(x + 100, y + 40)
                context.lineTo(x + 100, y + 50)
                context.lineTo(x + 25, y + 50)
                context.lineTo(x + 25, y + 40)
                context.closePath()
                context.fillStyle = 'white'
                context.fill()

            }

            
            
            function Road(x,y,color)
            {
                this.x = x;
                this.y = y;
                this.color = color;
                this.drawRoad = function()
                {
                    context.beginPath()
                    context.lineTo(this.x+1400, this.y )
                    context.lineTo(this.x+1400, this.y+100)
                    context.lineTo(this.x, this.y+100)
                    context.lineTo(this.x,this.y)
                    context.fillStyle = this.color
                    context.globalCompositeOperation = "lighter";
                    context.fill()
                    context.closePath()
                }
            }
            function Cloud(x,y,clouds_dx, clouds_dy, color)
            {
                this.x = x;
                this.y = y
                this.clouds_dx = clouds_dx;
                this.clouds_dy = clouds_dy;
                this.color = color;

                this.drawCloud = function()
                {
                    context.beginPath()
                    context.moveTo(this.x, this.y)
                    context.arc(this.x, this.y, 5, Math.PI * 2, false);
                    context.arc(this.x+7, this.y-4, 5, Math.PI * 2, false);
                    context.arc(this.x+5, this.y-4, 5, Math.PI * 2, false);
                    context.arc(this.x, this.y-10, 5, Math.PI * 2, false);
                    context.closePath()
                    context.fillStyle = randColor()
                    context.fill()

                }
                this.moveCloud = function()
                {
                    // Check to see if the ball is still on the canvas.
                    
                    this.y -= this.clouds_dy;
                    if (this.y < 300)
                    {
                        this.y = 420;
                    }
         
                }
            }
            function Car(x,y,car_dx, car_dy,color)
            {
                this.x = x;
                this.y = y;
                this.car_dx = car_dx;
                this.car_dy = car_dy;
                this.color = color;

                this.drawCar = function()
                {
                    //base
                    context.beginPath()
                    context.moveTo(this.x,this.y)
                    context.lineTo(this.x+60, this.y)
                    context.lineTo(this.x+70, this.y-10)
                    context.lineTo(this.x+50, this.y-25)
                    context.lineTo(this.x, this.y-25)
                    context.lineTo(this.x - 10, this.y-10)

                    context.lineTo(this.x,this.y)
                    context.closePath()
                    context.fillStyle = this.color
                    context.fill()
                    context.strokeStyle = 'black'
                    context.stroke()

                    context.beginPath()
                    context.moveTo(this.x + 20, this.y)
                    context.arc(this.x+15, this.y, 10, Math.PI * 2, false);
                    context.arc(this.x+45, this.y, 10, Math.PI * 2, false);
                    context.closePath()
                    context.fillStyle = 'black'
                    context.fill()

                }
                this.moveCar = function()
                {
                    this.x += this.car_dx;
                    if (this.x >= 1400)
                    {
                        this.x = 0
                    }

                }
            }
            function External(x,y,size,color)
            {
                this.x = x;
                this.y = y;
                this.size = size;
                this.color = color;

                this.drawExternal = function()
                {
                    drawFence(this.x, this.y, this.size, this.color)
                    
                }
            }
            function House(x,y,size,color,color2,color3)
            {
                this.x = x;
                this.y = y;
                this.size = size;
                this.color = color;
                this.color2 = color2;
                this.color3 = color3;

                


                this.drawHouse = function()
                {
                    drawSquare(this.x,this.y,this.size,this.color)
                    drawTriangle(this.x, this.y - this.size, this.size, this.color2)
                    drawWindow(this.x, this.y, this.size, this.color3)
                }
            }
            function randColor() 
            {
                var letters = '0123456789ABCDEF';
                var color = '#';
                for (var i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }
            function CarWindowUpper(x, y)
            {
                context.beginPath();
                context.fillStyle = "blue";
                context.rect(x + 55, y - 20, 20, -20);
                context.fill();
            }

            function CarBodyLower(x, y, colour)
            {
                context.beginPath();
                context.fillStyle = colour;
                context.rect(x, y, 115, -25);
                context.fill();

                context.beginPath();
                context.fillStyle = colour;
                context.rect(x + 25, y, 80, -45);
                context.fill();
            }

            function CarWindowLower(x, y)
            {
                context.beginPath();
                context.fillStyle = "blue";
                context.rect(x + 40, y - 20, 20, -20);
                context.fill();
            }

            function CarWheels(x, y)
            {
                context.beginPath();
                context.fillStyle = "black";
                context.arc(x + 20, y, 10, 0, Math.PI*2, false);
                context.fill();

                context.beginPath();
                context.fillStyle = "black";
                context.arc(x + 90, y, 10, 0, Math.PI*2, false);
                context.fill();
            }
            function CarBodyUpper(x, y, colour)
            {
                context.beginPath();
                context.fillStyle = colour;
                context.rect(x, y, 115, -25);
                context.fill();

                context.beginPath();
                context.fillStyle = colour;
                context.rect(x + 10, y, 80, -45);
                context.fill();
            }

            function CarUpper(x, y, dx, dy, colour)
            {
                this.x = x;
                this.y = y;
                this.dx = dx;
                this.dy = dy;
                this.colour = colour;

                this.drawCarUpper = function()
                {
                    CarBodyUpper(this.x, this.y, this.colour)
                    CarWheels(this.x, this.y)
                    CarWindowUpper(this.x, this.y)
                }

                this.moveCarUpper = function()
                {

                    this.x += this.dx;
                    this.y += this.dy;

                    if(this.x > 1400)
                    {
                        this.x = -110;
                        this.colour = randColor();
                    } 
                }
            }

            function CarLower(x, y, dx, dy, colour)
            {
                this.x = x;
                this.y = y;
                this.dx = dx;
                this.dy = dy;
                this.colour = colour;

                this.drawCarLower = function()
                {
                    CarBodyLower(this.x, this.y, this.colour)
                    CarWheels(this.x, this.y)
                    CarWindowLower(this.x, this.y)
                }

                this.moveCarLower = function()
                {

                    this.x += -this.dx;
                    this.y += -this.dy;

                    if(this.x < -110)
                    {
                        this.x = 1100;
                        this.colour = randColour();
                    }
                }
            }
                



            function drawFence(x,y,size,color)
            {
                context.beginPath()
                context.moveTo(x,y)
                context.lineTo(x,y-size)
                context.lineTo(x+size/4, y-size -size/4)
                context.lineTo(x+size/2, y-size)
                context.lineTo(x+size/2,y)
                context.lineTo(x,y)
                context.closePath()
                context.fillStyle = color
                context.fill()
                context.strokeStyle = 'black'
                context.stroke()
            }

            function drawWindow(x,y, size, color)
            {
                context.beginPath()
                context.moveTo(x + size/10, y - 2*size/3);
                context.lineTo(x + size/10 + size/6, y- 2*size/3);
                context.lineTo(x + size/10 + size/6, y - size/3);
                context.lineTo(x+ size/10, y - size/3 );
                context.lineTo(x + size/10, y - 2*size/3);
                context.closePath()
                context.fillStyle = color;
                context.fill()
                
                //line for window

                context.beginPath()
                context.moveTo(x + size/10 + size/12, y - size/3)
                context.lineTo(x+ size/10 + size/12, y- 2*size/3)
                context.moveTo(x + size/10,y - size/2)
                context.lineTo(x + size/10 + size/6, y-size/2 )
                context.closePath()
                context.strokeStyle = 'black'
                context.stroke()





            }

            
            
            function drawTriangle(x,y,size,color)
            {
                
                context.beginPath()
                context.moveTo(x,y);
                context.lineTo(x + size/2, y - size);
                context.lineTo(x +size,y);
                context.lineTo(x,y);
                context.closePath()
                context.fillStyle = color;
                context.fill()

                context.beginPath()
                context.moveTo(x + size/4, y - size/2)
                context.lineTo(x+ size/4, y - size/1.3)
                context.lineTo(x + size/3, y - size/1.3)
                context.lineTo(x + size/3, y - size/1.5)
                context.lineTo(x+ size/4, y - size/2)
                context.closePath()
                context.fillStyle = 'grey'
                context.fill()
                context.strokeStyle = 'black'
                context.stroke()


            }
            function drawSquare(x,y,size,color)
            {
                
                context.beginPath()
                context.moveTo(x,y);
                context.lineTo(x+size, y);
                context.lineTo(x+size, y-size);
                context.lineTo(x,y-size);
                context.lineTo(x,y);
                context.fillStyle = color;
                context.fill()
                context.closePath()

                //door 
                
                context.beginPath()
                context.moveTo(x + size/3, y)
                context.lineTo(x + size/3, y - size/2)
                context.lineTo(x + 2*size/3, y-size/2)
                context.lineTo(x+ 2*size/3,y)
                context.lineTo(x + size/3, y)
                context.closePath()
                context.fillStyle = 'brown'
                context.fill()
                context.strokeStyle = 'black'
                context.stroke()

                //middle line of door
                context.beginPath()
                context.moveTo(x + size/2,y)
                context.lineTo(x+size/2, y- size/2)
                context.closePath()
                context.strokeStyle = 'black'
                context.stroke()


                //door knob
                context.beginPath()
                context.arc(x+size/1.8, y- size/4, 3, 0, Math.PI*2, false);
                context.arc(x+size/2.2, y- size/4, 3, 0, Math.PI*2, false);
                context.closePath()
                context.fillStyle = "yellow"
                context.fill()

           
            }
           
                    
           
            
            
            function drawAnimation()
            {
                context.clearRect(0, 0, canvas.width, canvas.height);
                var grd = context.createLinearGradient(0, 0, 0, canvas.height);
                grd.addColorStop(0, "black");
                grd.addColorStop(1, 'yellow');

                // Fill with gradient
                context.fillStyle = grd;
                context.fillRect(0, 0, canvas.width, canvas.height ); 

                context.fillStyle = "green";
                context.fillRect(0,600, canvas.width, canvas.height);
                for (var i = 0; i < houses.length; i ++)
                {
                    houses[i].drawHouse();
                
                }
                for (var i = 0; i < externals.length; i ++)
                {
                    externals[i].drawExternal();
                
                }
                for (var i = 0; i < clouds.length; i ++)
                {
                    clouds[i].drawCloud();
                    clouds[i].moveCloud()
                
                }
                road1.drawRoad()
                for(var x = 0; x < 1400; x += 120 )
                {
                    drawline(x,700)

                }
                
                for(var i = 0; i < carsupper.length; i++)
                {
                    carsupper[i].drawCarUpper();
                    carsupper[i].moveCarUpper();
                }
                
            }
            

            function startAnimation()
            {
                canvas = document.getElementById("canvas");
                context = canvas.getContext("2d");
                for(var x = 0; x < 1400; x+= 130)
                {
                    houses.push(new House(x,600,100, randColor(), randColor()))

                }
                for(var x = 0; x < 1400; x+= 25)
                {
                    externals.push(new External(x,650,50, 'red'))

                }
                for(var x = 0; x < 1400; x+= 130)
                {
                    clouds.push(new Cloud(x+25,420,1,1, 'yellow'))

                }
                for(var x = 0; x < 1400; x+= 130)
                {
                    clouds.push(new Cloud(x+25,20,1,1, 'white'))

                }
                road1 = new Road(0, 700, 'grey')  
                intervalid = setInterval(drawAnimation, 15);
                car1 = new Car(10,720,3,1,'blue')
                car2 = new Car(10,760,4,1,"red")
                
               
                carsupper.push(new CarUpper(0, 720, 5, 0, randColor()));
                carsupper.push(new CarUpper(160, 760, 5, 0, randColor()));
                carsupper.push(new CarUpper(610, 720, 5, 0, randColor()));
                carsupper.push(new CarUpper(910, 760, 5, 0, randColor()));


                
                // index 0 1 

            }

//_____________________________________________________________________/

            function stopAnimation()
            {
                clearInterval(intervalid);


            }
        </script>
    </head>
    <body>
        <canvas id="canvas" height="800px" width="1400px"></canvas>
        <br />
        <button onclick="startAnimation()">Start Animation</button>
        <button onclick="stopAnimation()">Stop Animation</button>
    </body> 
</html>